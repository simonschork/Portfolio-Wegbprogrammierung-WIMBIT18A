<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <title>Schwerpunkt</title>

    <link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../css/custom.css">

    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">Web-Programmierung</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-time">
                        <a class="nav-link" href="../index.html">Startseite</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../portfolio/portfolio.html">Portfolio</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="schwerpunkt.html">Schwerpunkt</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../kommentare/kommentare.html">Kommentare</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Content -->
    <div class="container">
        <div class="row">
            <div class="mt-3 row col-lg-12 align-content-center">
                <img class="logo align-content-center" src="../bilder/tensorflow-logo.png" alt="Tensorflow Logo">
                <h1 class="mt-5 text-center">Toxicity Detection mit Tensorflow.js</h1>
            </div>
            <div class="col-lg-qw text-justify" id="intro">
                <h3 class="mt-5 text-center">Einleitung</h3>
                <p class="mt-4">
                    Im Folgenden möchte ich auf die Grundlagen des implementierten Modells eingehen. Zuerst wird
                    erläutert was Künstliche Neurale Netze sind und welche Art von neuralem Netz sich für die
                    Verarbeitung von Sprache eignet. Anschließend gehe ich auf den Teilbereich des maschinellen Lernens
                    ein der sich mit Sprachen befasst und welche Methoden es zur Umwandlung von Sprache gibt. Am Ende
                    erkläre ich die Implementierung des Modells und Schwierigkeiten, die dabei auftraten.
                </p>
            </div>
            <div class="col-lg-12 text-justify" id="deeplearning">
                <h3 class="mt-5 text-center">Deep Learning</h3>
                <p class="mt-4">
                    <b>Deep Learning (DL)</b> ist ein Bereich des <b>Machine Learning(ML)</b>, indem <b>künstliche
                        neurale
                        Netzwerke (NN)</b> verwendet werden. um die gewünschten Ergebnisse zu erzielen. Ein solches Netz
                    besteht aus mehreren <b>Layern</b>. Ein Layer wiederum besteht aus mehren <b>Neuronen</b>, welche
                    die kleinste Struktur im Netzwerk darstellen. Jedes Neuron besteht im wesentlichen aus einer
                    Funktion, die mit dem Input eine mathematische Berechnung durchführt. Für diese Berechnungen müssen
                    die Daten <b>vektorisiert</b> werden, da ein NN mit Vektoren und Matrizen arbeitet. Der erste Layer
                    eines Netzwerkes ist der <b>Input Layer</b>. Er erhält
                    den Input vom
                    Entwickler, meistens in Form eines Datensatzes, bestehend aus Beispielen. Dieser wird <b>Train
                        Set</b> genannt. Der letzte Layer, der <b>Output Layer</b>, kann je nach Art des Netzwerks
                    unterschiedlich aussehen. Im hier angewendeten Fall entspricht die Anzahl der Neuronen im Output
                    Layer wahrscheinlich den möglichen Klassifizierungen, also sieben. Zwischen diesen beiden können
                    theoretisch unendlich viele <b>Hidden Layer</b> liegen, praktisch wird die Anzahl durch die
                    verfügbare Rechenleistung eingeschränkt. So wird im Idealfall das Ergebnis mit jedem Layer genauer.
                </p>
                <div class="row">
                    <div class="col-2"></div>
                    <div class="col-10">
                        <figure role="group" style="width: 70%;">
                            <img src="../bilder/simple-nn.png" alt="Basic Neural Network">
                            <figcaption class="text-center">Quelle: <a target="_blank"
                                    href="https://de.wikipedia.org/wiki/K%C3%BCnstliches_neuronales_Netz#/media/Datei:Neural_network.svg">
                                    Wikipedia</a>
                            </figcaption>
                        </figure>
                    </div>
                </div>
                <p>
                    Diese Überlegung und die dazugehörigen Algorithmen existieren schon sehr lange, das Konzept kam zum
                    ersten Mal 1943 auf und orientiert sich tatsächlich am Aufbau eines menschlichen Gehirns. Doch
                    damals war es unmöglich es umzusetzen. Heutzutage haben wir nicht nur genügend Rechenkraft, um
                    künstliche neurale Netzwerke zu realisieren, die Menge an verfügbaren Daten ist drastisch gestiegen,
                    was das Training solcher Strukturen erst möglich macht.
                </p>

                <figure role="group" style="width: 70%;" class="float-left mr-4">
                    <img src="../bilder/precision-nn.PNG" alt="Precision DL & ML">
                    <figcaption class="text-center">Quelle: Eigene Darstellung</figcaption>
                </figure>
                <p>
                    Im Gegensatz zu klassischen Algorithmen des maschinellen Lernens kann der Grenzwert, dem sich die
                    Präzision des Algorithmus annähert, durch Hinzufügen von Hidden Layern gesteigert werden. Nachteil
                    hierbei ist jedoch: Größere Netzwerke benötigen mehr Zeit für das Training.
                </p>
            </div>
            <div class="col-lg-12 text-justify" id="rnn">
                <h3 class="mt-5 text-center">Recurrent Neural Network</h3>
                <p class="mt-4">
                    Bei einem <b>Recurrent Neural Network (RNN)</b> handelt es sich um eine Art Neurales Netzwerk, das
                    sich
                    besonders gut zur Verarbeitung unstrukturierter und sequenzieller Daten eignet, wie es zum Beispiel
                    Sprachen bzw. Schrift ist. Die Beudeutung eines neuen Wortes hängt stark von dem vorherigen Wort ab.
                    Ein RNN merkt sich das Ergebnis der Berechnung, also den Output Layer und verwendet ihn also
                    zusätzlichen Input.
                </p>
                <figure role="group" style="width: 70%;" class="float-right ml-4">
                    <img src="../bilder/rnn-simple.PNG" alt="Simplified RNN">
                    <figcaption class="text-center">Quelle: <a href="https://www.youtube.com/watch?v=UNmqTiOnRfg"
                            target="_blank">Luis
                            Serrano</a></figcaption>
                </figure>
                <p>
                    Die Pfeile stellen verschiedene Rechenoperationen dar, welche von der Art des NN abhängen und vorher
                    festgelegt werden. Während die Kreise die vektorisierten Inputdaten darstellen. Sie könnten z.B. für
                    ein Wort in einem Satz stehen. Die erste Reihe Vektoren ist der Input Layer.
                </p>
                <p>Dieser wird mit einer vorher festgelegte Matrix mutlipliziert, die beim Beispiel Wörter für eine
                    Gewichtung der verschiedenen Wörter in einem Satz stehen kann (ein <i>und</i> hat wahrscheinlich
                    weniger Einfluss auf die Bedeutung des Satzen als ein Adjektiv).
                </p>
                <p>
                    Anschließend werden die Ergebnisse addiert, um auf einen Entscheidungsvektor zu kommen, der die
                    Inputdaten beider Quellen mit einbezieht. Dieser wird in eine nicht-lineare Funktion eingefügt,
                    welche für den höchsten Wert eine <b>1</b> und für alle anderen Werte eine <b>0</b> zurückgibt.
                    Somit werden unwichtige Komponenten eliminiert (an dieser Stelle könnte das <i>und</i> vollständig
                    elimniert werden, wenn es auf den Sinn des Satzes keinen Einfluss hat). Die
                    Mergemap verbindet schlussendlich die Ergebnisverktoren beider Inputs und gibt den Output, welcher
                    erneut als Input genutzt wird.
                </p>
            </div>
            <div class="col-lg-12 text-justify" id="nlp">
                <h3 class="mt-5 text-center">Natural Language Processing</h3>
                <p class="mt-4">
                    <b>Natural Language Processing (NLP)</b> befasst sich mit Aufgabe, die menschliche Kommunikation,
                    für Maschinen verständlich zu machen. Die Schwierigkeit liegt vor allem darin, einer Maschine die
                    nach mathematischen Prinzipien arbeitet, die oft subjektiven und selten eindeutigen Regeln unserer
                    Sprache beizubringen. Dennoch gelang es bisher vielen Entwicklern in den Bereichen Klassifizierung
                    und Übersetzung beeindruckende Ergebnis zu erzielen.
                </p>
                <blockquote class="blockquote">
                    <p class="mb-0" style="color: #6c757d;"><i>"Natural Language Processing is a theoretically motivated
                            range of computational techniques for analyzing and representing naturally occurring texts
                            at one or more levels of linguistic analysis for the purpose of achieving human-like
                            language processing for a range of tasks or applications."</i></p>
                    <footer class="blockquote-footer text-center">Liddy, Elizabeth D. <cite title="Source Title"><a
                                href="https://surface.syr.edu/cgi/viewcontent.cgi?article=1019&context=cnlp"
                                target="_blank" rel="noopener noreferrer">"Natural language
                                processing"</a> (2001)
                        </cite>
                    </footer>
                </blockquote>
                <p>
                    Für das verwenden von Sprache in Algorithmen muss sie eine mathematische Aussage umgewandelt werden.
                    Das sind drei der beliebtesten Ansätze um diesen Prozess zu erreichen:
                </p>
                <ul>
                    <li><b>Tokenization</b> bricht den Text in einzelne Wörter herunter. Hierzu können verschiedene
                        Zeichen als Trennung fungieren. Am beliebtesten ist jedoch logischerweise das Leerzeichen
                    </li>
                    <br>
                    <li><b>Stemming</b> schneidet Teile von abgeleiteten Wörtern ab. Auf <i>Frei-heit</i> wird
                        <i>Frei</i>. Dadurch erhalten manche Wörter jedoch eine anderen Bedeutung als eigentlich die
                        Intention war.</li>
                    <br>
                    <li>Mit <b>N-Grams</b> unterteilt man einen Satz in n Ausdrücke. Ein <i>unigram</i>-Modell
                        würde einen Satz in jeweils ein Wort unterteilen. Ein <i>bigram</i>-Modell hingegen würde
                        jeweils Wortpaare bilden.</li>
                    <br>
                    <li><b>TF-IDF</b> gibt den zuvor unterteilten Sätzen nun jeweils ein Gewicht, dass sich aus der
                        <i>Term Frequenzy (TF)</i>, wie oft ein Ausdruck in einem Dokument vorkommt und der
                        <i>Inverse Document Frequenzy (IDF)</i>, wie viel Information ein Audruck hergibt
                        zusammensetzt</li>
                    <br>
                    <li><b>One-Hot Encoding</b> stellt Wörter in einer Matrix dar. Die Spalten sind hier die
                        Ausdrücke des untersuchten Satzes und die Zeilen, die bekannten Vokabeln. Überschneidungen
                        werden mit dem Wert <b>1</b> belegt, ansonsten ist der Wert <b>0</b>.</li>
                    <br>
                </ul>
                <p>
                    Dies ist nur ein kleiner und stark verinfachter Auszug der möglichen Ansätze und soll einen Eindruck
                    verschaffen wie sich Worte in Terme umwandeln lassen.
                </p>
            </div>
            <div class="col-lg-12 text-justify" id="toxicitydetection">
                <h3 class="mt-5 text-center">Toxicity Detection by tfjs/models</h3>
                <p class="mt-4">
                    Google bietet mit <b>Tensorflow</b> ein Framework, was bei der Implementierung von NNs unterstützt.
                    Außerdem stellen sie seit neustem trainierte Modelle zur Verfügung, die nur noch in eine
                    Webanwendung eingebunden werden müssen. Zur Zeit stehen auf der <span><a
                            href="https://www.tensorflow.org/js/models/?hl=de"
                            target="_blank">Tensorflow.js-Webseite</a></span> acht
                    Modelle zur Verfügung. Unter anderem ein "Text toxicity detection"-Modell. Mit Hilfe dieses Modells
                    möchte ich den Ansatz einer Kommentarfunktion umsetzen, welche
                    den Nutzer warnt,
                    wenn er einen möglicherweise beleidigenden Text verfasst und ihn an der Veröffentlichung des
                    Kommentars hindert. Der Code des Modells ist
                    vollständig auf <span><a href="https://github.com/tensorflow/tfjs-models/tree/master/toxicity"
                            target="_blank">Github</a></span>
                    verfügbar und musste nur noch auf folgende Weisen angepasst werden:
                </p>
                <p class="text-center">
                    Der Eingabewert des Textfeldes wurde einem Array zugewiesen, nur so kann das Modell den Text
                    verarbeiten.
                </p>
                <figure class="code-box">
                    <pre class="code-text">

                        var kommentartext = document.getElementById('commentinput').value;
                        var kommentar = Array(kommentartext);
                    </pre>
                </figure>
                <p class="text-center">
                    Anschließend wurde ein Grenzwert festgelegt (das Modell muss sich zu 0.9 sicher sein, dass die
                    Klassifizierung stimmt, erst dann wird sie zurückgegeben) und ein Objekt deklariert, welches später
                    die Ergebnisse in Form eines JSON-Objektes enthält.
                </p>
                <figure class="code-box">
                    <pre class="code-text">

                        //Minimale Vorhersagesicherheit
                        const grenzwert = 0.9;
                        //Objekt für Klassifizierung deklarieren
                        var classification = new Object();
                    </pre>
                </figure>
                <p class="text-center">
                    Nun musste das Modell mit dem festgelegten Grenzwert und Input geladen
                </p>
                <figure class="code-box">
                    <pre class="code-text">

                        classification = await toxicity.load(grenzwert).then(async model => {
                            //Kommentar als modelinput
                            var saetze = kommentar;
                            var modeloutput = new Object();
                    </pre>
                </figure>
                <p class="text-center">
                    und schließlich die Klassifizierung des Kommentars durchgeführt und zurückgegeben werden.
                </p>
                <figure class="code-box">
                    <pre class="code-text">

                            //Vorhersage
                            modeloutput = await model.classify(saetze);
                            //Vorhersage übergeben
                            return modeloutput;
                        });
                    </pre>
                </figure>
                <p class="text-center">
                    Nachdem die Klassifizierung erfolgreich durchgeführt wurde wird geprüft, ob eine der möglichen
                    Kategorien ein <i>match == true</i> hat. Ist dies der Fall wird der Nutzer benachrichtigt,
                    wenn nicht wird sein Kommentar veröffentlicht.
                </p>
                <figure class="code-box">
                    <pre class="code-text">

                        //Toxicity prüfen
                        if (classification[0].results[0].match == true) {
                            alert('Entschuldigung, Ihr Kommentar wird nicht veröffentlicht, da er als Beleidigung interpretiert werden könnte!')
                        } else if (classification[1].results[0].match == true) {
                            alert('Entschuldigung, Ihr Kommentar wird nicht veröffentlicht, da er als Beleidigung interpretiert werden könnte!')
                        } else if (classification[2].results[0].match == true) {
                            alert('Entschuldigung, Ihr Kommentar wird nicht veröffentlicht, da er als Beleidigung interpretiert werden könnte!')
                        } else if (classification[3].results[0].match == true) {
                            alert('Entschuldigung, Ihr Kommentar wird nicht veröffentlicht, da er als Beleidigung interpretiert werden könnte!')
                        } else if (classification[4].results[0].match == true) {
                            alert('Entschuldigung, Ihr Kommentar wird nicht veröffentlicht, da er als Beleidigung interpretiert werden könnte!')
                        } else if (classification[5].results[0].match == true) {
                            alert('Entschuldigung, Ihr Kommentar wird nicht veröffentlicht, da er als Beleidigung interpretiert werden könnte!')
                        } else if (classification[6].results[0].match == true) {
                             alert('Entschuldigung, Ihr Kommentar wird nicht veröffentlicht, da er als Beleidigung interpretiert werden könnte!')
                        } else {
                            //Kommentar veröffentlichen
                            document.getElementById('commentoutput').innerHTML = kommentar;
                        }
                    </pre>
                </figure>
                <p>
                    Die größte Herrausforderung stellte für mich das Übergeben des Modelloutputs dar. Mir war zu Anfang
                    nicht klar, das diese Implementierung nur in einer asynchronen Funktion funktioniert, in der man mit
                    dem Schlüsselwort <i>await</i>, auf die erfolgreiche Ausführung des Modells warten kann. Ohne das
                    konnte der Output nicht aus der Funktion übergeben werden.
                </p>
            </div>
            <div class="col-lg-12 text-justify" id="quellen">
                <h3 class="mt-5">Quellen</h3>
                <ul class="mt-4">
                    <li><a href="https://www.udemy.com/course/machine-learning-komplett/" target="_blank"
                            rel="noopener noreferrer">Machine Learning </a>[Onlinekurs]</li>
                    <li><a href="https://www.youtube.com/playlist?list=PLR0bgGon_WTKXxEhSDLwSkDl8SCCCaPoA"
                            target="_blank" rel="noopener noreferrer">Neural Network (Deep Learning)</a> [Video]</li>
                    <li><a href="https://github.com/tensorflow/tfjs-models/tree/master/toxicity" target="_blank"
                            rel="noopener noreferrer">Text toxicity detection</a></li>
                    <li><a href="https://www.tensorflow.org/js/guide" target="_blank"
                            rel="noopener noreferrer">Tensorflow Documentation</a></li>
                    <li><a href="https://www.youtube.com/watch?v=UNmqTiOnRfg" target="_blank"
                            rel="noopener noreferrer">A friendly introduction to Recurrent Neural Networks </a>[Video]
                    </li>
                    <li><a href="https://towardsdatascience.com/natural-language-processing-from-basics-to-using-rnn-and-lstm-ef6779e4ae66"
                            target="_blank" rel="noopener noreferrer">Natural Language Processing: From Basics to using
                            RNN and LSTM </a>[Artikel]</li>
                </ul>
            </div>
            <div class="mt-5"><br></div>
        </div>
    </div>

    <!--Footer-->
    <footer class="mt-5 page-footer font-small mygrey pt-4">
        <div class="container text-center text-md-left">
            <div class="row">
                <div class="col-md-9 mt-md-0 mt-3">
                    <h5 class="text-uppercase white footer-font">Portfolio zur Vorlesung Webprogrammierung</h5>
                    <p class="white footer-font">Diese Webseite wurde im Rahmen einer Prüfungsleistung erstellt. Der
                        Code ist
                        vollständig auf Github verfügbar. Zur Erstellung wurde das Framework Bootstrap genutzt,
                        angepasst und ergänzt.</p>
                </div>
                <hr class="clearfix w-100 d-md-none pb-3">
                <div class="col-md-3 mb-md-0 mb-3">
                    <h5 class="text-uppercase white footer-font">Links</h5>
                    <ul class="list-unstyled white">
                        <li><a class="white footer-font" href="https://github.com/simonschork/webprog-portfolio"
                                target="_blank">Github</a></li>
                        <li><a class="white footer-font" href="https://getbootstrap.com/" target="_blank">Bootstrap</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright text-center py-3 white footer-font">© 2019 Copyright:
            <span>Simon Schork</span>
        </div>
    </footer>

    <a id="back-to-top" href="#" class="btn btn-primary btn-lg back-to-top" role="button" title="Zurück zum Anfang"
        data-toggle="tooltip" data-placement="left"><i class="material-icons">arrow_upward</i></a>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/bootstrap.js"></script>
    <script src="../js/custom.js"></script>
</body>

</html>